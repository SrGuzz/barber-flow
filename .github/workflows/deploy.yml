      - name: ðŸ“¡ Enviar arquivos modificados via SFTP
        env:
          SFTP_HOST: ${{ secrets.SFTP_HOST }}
          SFTP_USER: ${{ secrets.SFTP_USERNAME }}
          SFTP_PASS: ${{ secrets.SFTP_PASSWORD }}
          REMOTE_PATH: /home/storage/2/8d/40/barberflowtecnol1
        run: |
          while read file; do
            if [[ $file == public/* ]]; then
              TARGET_DIR="$REMOTE_PATH/public_html/$(dirname ${file#public/})"
              DEST="$REMOTE_PATH/public_html/${file#public/}"
            elif [[ $file == barber_flow/* ]]; then
              TARGET_DIR="$REMOTE_PATH/barber_flow/$(dirname ${file#barber_flow/})"
              DEST="$REMOTE_PATH/barber_flow/${file#barber_flow/}"
            else
              echo "Ignorando: $file"
              continue
            fi

            echo "Enviando: $file â†’ $DEST"

            # Cria diretÃ³rio remoto (ignora erro se jÃ¡ existir)
            sshpass -p "$SFTP_PASS" ssh -o StrictHostKeyChecking=no "$SFTP_USER@$SFTP_HOST" "mkdir -p \"$TARGET_DIR\""

            # Cria arquivo de batch temporÃ¡rio
            echo "put \"$file\" \"$DEST\"" > sftp_batch.txt

            # Executa envio via sftp
            sshpass -p "$SFTP_PASS" sftp -o StrictHostKeyChecking=no -b sftp_batch.txt "$SFTP_USER@$SFTP_HOST"
          done < changed_files.txt
